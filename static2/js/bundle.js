(()=>{const o=L.map("map",{minZoom:-2,crs:L.CRS.Simple,maxBounds:[[0,0],[5144,7260]],layers:[e,_]});var a=[[0,0],[5144,7260]],n=L.Icon.extend({options:{iconSize:[38,65],shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-100]}}),e=L.imageOverlay("/static/san_joaquin_v2.webp",a).addTo(o);o.fitBounds(a);var r=new n({iconUrl:"/images/maerker_icon_green.png"}),t=new n({iconUrl:"/static/images/marker_icon_red.png"}),i=new n({iconUrl:"/static/images/marker_icon_blue.png"}),l=new n({iconUrl:"/static/images/marker_icon_yellow.png"}),c=new n({iconUrl:"/static/images/marker_icon_black.png"});const p=L.marker([3670,4385],{icon:r}).bindPopup("vidrio"),s=L.marker([3670,4360],{icon:t}).bindPopup("normal"),d=L.marker([3670,4335],{icon:i}).bindPopup("papel y cartón"),m=L.marker([3670,4310],{icon:c}).bindPopup("latas"),u=L.marker([3670,4285],{icon:l}).bindPopup("latas");p.addTo(o),s.addTo(o),d.addTo(o),m.addTo(o),u.addTo(o);var g=L.layerGroup([p]),y=L.layerGroup([s]),v=L.layerGroup([d]),b=L.layerGroup([m]),_=(L.layerGroup([u]),{Normal:y,"Papel y cartón":v,Vidrio:g,"Botellas plásticas":botellas_plasticas,Latas:b}),k=(L.control.layers(null,_).addTo(o),L.popup());o.on("click",(function(a){var n=document.createElement("div");n.innerHTML="Deseas solicitar un marcador en "+a.latlng.toString()+'?<br><br>Elegir tipo de marcador: <select id="markerType">   <option value="normal">Normal</option>   <option value="Papel y cartón">Papel y cartón</option>   <option value="Vidrio">Vidrio</option>   <option value="Botellas plásticas">Botellas plásticas</option>   <option value="Latas">Latas</option></select><br><br><button id="confirmButton">Solicitar</button>',n.querySelector("#confirmButton").addEventListener("click",(function(){var e=n.querySelector("#markerType").value;!function(o,a){fetch("/save_request/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mapa:"1",x_coordinate:o.lat,y_coordinate:o.lng,tipo:a})}).then((o=>o.json())).then((o=>{console.log("Server response:",o)})).catch((o=>{console.error("Error:",o)}))}(a.latlng,e),alert("Tipo de marcador: "+e+"\nCoordenadas: "+a.latlng.toString()),o.closePopup()})),k.setLatLng(a.latlng).setContent(n).openOn(o)}))})();